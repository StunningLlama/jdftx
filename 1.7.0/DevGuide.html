<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JDFTx: Developer&#39;s Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="jdftx-55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JDFTx
   &#160;<span id="projectnumber">1.7.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('DevGuide.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Developer's Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="Architecture.png" alt=""/>
</div>
<p>The figure above outlines the overall organization of the JDFTx codebase, and points out some of the key classes and their interactions. Use <a href="modules.html">the modules list page</a> to delve further into the functional organization of the code, and to find details about <a href="files.html">header files</a> and <a href="classes.html">classes</a>. See <a class="el" href="ChangeLog.html">Change log</a> for the latest updates to the code, and <a class="el" href="Contributors.html">Contributors</a> to get in touch with other developers.</p>
<p>Within CMake, the overall compilation is divided into four main targets. Most of the functionality is compiled into a dynamic link library <b>libjdftx</b>. Three light-weight executables act as a front-end to this functionality:</p>
<ul>
<li><b>jdftx</b>: most DFT, solvation, liquids calculations, including post-processing</li>
<li><b>phonon</b>: phonon dispersion and electron-phonon interaction calculations</li>
<li><b>wannier</b>: generation of maximally-localized <a class="el" href="classWannier.html" title="Compute Maximally-Localized Wannier Functions.">Wannier</a> functions <a class="el" href="citelist.html#CITEREF_MLWF">[20]</a> and <em>ab initio</em> tight binding models.</li>
</ul>
<p>This organization makes it potentially easy for other DFT codes to take advantage of JDFTx features, especially JDFT and solvation models, by linking directly to libjdftx. It is also easy to add custom user executables that link to libjdftx to do specialized calculations; use jdftx.cpp as a starting point: it has &lt; 100 lines of code (linked to libjdftx) to produce jdftx.</p>
<p>The source code compiled into libjdftx is divided into four subdirectories (shown in green dotted lines in the chart above):</p>
<ul>
<li><b>core</b>: implements the basic <a href="group__DataStructures.html">data structures</a>, <a href="group__Operators.html">operators</a> and <a href="group__Algorithms.html">algorithms</a> used by the rest of JDFTx. <a class="el" href="classManagedMemory.html" title="Base class for managed memory of a specified data type.">ManagedMemory</a> handles the separate CPU and GPU memory spaces, automatically moving data between them when necessary. There are few explicit memory allocation / device memory copy calls outside the implementation of this class. Scalar fields used by the electronic and fluid codes, eg. ScalarField in real space and ScalarFieldTilde in reciprocal space derive from this class. <a class="el" href="Minimize_8h.html" title="Nonlinear minimization and linear solve templates.">Minimize.h</a> provides Conjugate Gradients and L-BFGS algorithms, which are used for electronic and fluid free energy minimization, as well as ionic geometry optimization. <a class="el" href="classPulay.html" title="Pulay mixing to optimize self-consistent field optimization .">Pulay</a> provides a templated self-consistent field iteration used for electrons as well as the nonlinear solvation model in class <a class="el" href="classNonlinearPCM.html" title="Nonlinear solvation models: shared electrostatic part implementation.">NonlinearPCM</a>. Electronic wavefunctions in <a class="el" href="classColumnBundle.html" title="Wavefunction data structure.">ColumnBundle</a> also use the same mechanism. Among the data structures, <a class="el" href="classGridInfo.html" title="Simulation grid descriptor.">GridInfo</a> describes the plane-wave grid and Fourier transforms, while <a class="el" href="classCoulomb.html" title="Abstract base class for the (optionally truncated) Coulomb interaction.">Coulomb</a> implements the <a class="el" href="classCoulomb.html" title="Abstract base class for the (optionally truncated) Coulomb interaction.">Coulomb</a> kernel in various dimensions <a class="el" href="citelist.html#CITEREF_TruncatedEXX">[30]</a>.</li>
<li><b>fluid</b>: contains a hierarchy of fluid models abstracted by base class <a class="el" href="structFluidSolver.html" title="Abstract base class for the fluid solvers.">FluidSolver</a>. The classical DFT class of fluid models <a class="el" href="citelist.html#CITEREF_RigidCDFT">[31]</a> <a class="el" href="citelist.html#CITEREF_PolarizableCDFT">[36]</a> are implemented in <a class="el" href="classFluidMixture.html" title="Mixture of fluids that provides the total free energy functional for minimization Constructing Fex an...">FluidMixture</a> which ties together several <a class="el" href="structFluidComponent.html" title="Named fluid components for which bulk properties / geometries / excess functionals are available.">FluidComponent</a> objects; each component in turn contains an <a class="el" href="classIdealGas.html" title="Abstract base class for an IdealGas evaluator.">IdealGas</a> and <a class="el" href="classFex.html" title="Abstract base class for excess functionals.">Fex</a> to describe the fluid functional, while the components may interact with each other using mixing functionals in <a class="el" href="classFmix.html" title="Abstract base class for mixing functionals: interactions between fluids (beyond hard sphere and scale...">Fmix</a>. The hierarchy of solvation models are implemented in <a class="el" href="classLinearPCM.html" title="Linear solvation models: shared electrostatics implementation.">LinearPCM</a> <a class="el" href="citelist.html#CITEREF_PCM-Kendra">[15]</a>, <a class="el" href="classNonlinearPCM.html" title="Nonlinear solvation models: shared electrostatic part implementation.">NonlinearPCM</a> <a class="el" href="citelist.html#CITEREF_NonlinearPCM">[12]</a> and <a class="el" href="classSaLSA.html" title="Nonlocal SaLSA  solvation model implementation (electrostatic part)">SaLSA</a> <a class="el" href="citelist.html#CITEREF_SaLSA">[37]</a>, which are all abstracted by the <a class="el" href="classPCM.html" title="Base class for all PCMs.">PCM</a> class.</li>
<li><b>electronic</b>: implements Kohn-Sham electronic DFT in the plane-wave basis. <a class="el" href="classElecInfo.html" title="Electronic system auxiliary information, fillings and related functions.">ElecInfo</a> and <a class="el" href="classElecVars.html" title="Electronic variables and main energy calculator.">ElecVars</a> contain electronic occupations, wavefunctions, density, potential etc. and the functions to calculate dependent quantities, energies and the analytical derivatives of the energy with respect to these quantities. <a class="el" href="classExCorr.html" title="Exchange-Correlation energy calculator.">ExCorr</a> and <a class="el" href="classExactExchange.html" title="Exact-exchange calculator.">ExactExchange</a> handle exchange-correlation terms of the functional. <a class="el" href="classElecMinimizer.html" title="Variational total energy minimizer for electrons.">ElecMinimizer</a> and <a class="el" href="classSCF.html" title="Self-Consistent Field method for converging electronic state.">SCF</a> handle variational minimization and self-consistent field iteration on the electronic degrees of freedom. <a class="el" href="classSpeciesInfo.html" title="Pseudopotential for a species of ions, and atom positions and other properties for that species.">SpeciesInfo</a> handles electron-ion interactions (pseudopotentials) and force calculations for one type of ion, which are then collected together into <a class="el" href="classIonInfo.html" title="Container class for ionic system: collection of species, each with several atoms.">IonInfo</a> for the whole system. <a class="el" href="classIonicMinimizer.html" title="Ionic minimizer.">IonicMinimizer</a> and <a class="el" href="classLatticeMinimizer.html" title="Lattice minimizer.">LatticeMinimizer</a> implement optimization of the ionic and lattice geometries. <a class="el" href="classDump.html" title="Stores list of what to output and when, and implements functions to do so.">Dump</a> manages quantities to output and invokes requested post-processing routines. All above functionality (including fluids) is encapsulated in container class <a class="el" href="classEverything.html" title="Container class that contains, well, everything.">Everything</a>, which describes the state of a JDFTx calculation.</li>
<li><b>commands</b>: provides an object-oriented interface to defining commands and parsing input files. All three executables use this module to provide a <a href="Commands.html">consistent input file syntax</a>, with phonon and wannier recognizing a few extra commands in addition to all commands understood by jdftx. Custom user executables can also take advantage of this mechanism, and easily extend jdftx by just adding necessary commands to the existing set that already describes full DFT calculations.</li>
</ul>
<p>In addition, the source code distribution has the following subdirectories at the top level:</p>
<ul>
<li><b>phonon</b>: code for the phonon executable, beyond functionality in libjdftx.</li>
<li><b>wannier</b>: code for the wannier executable, beyond functionality in libjdftx.</li>
<li><b>aux</b>: several executables that link to libjdftx to do very specific tasks, which were mostly used for the development and unit testing of new (fluid) models prior to integration into main-line JDFTx. (Not compiled by default.)</li>
<li><b>opt</b>: optional interface libraries to other programs that can be compiled with JDFTx.</li>
<li><b>pseudopotentials</b>: archives of the pseudopotential libraries, GBRV <a class="el" href="citelist.html#CITEREF_GBRV">[10]</a> and SG15 <a class="el" href="citelist.html#CITEREF_SG15">[26]</a>, that are installed with JDFTx. These get extracted and installed into the build path.</li>
<li><b>scripts</b>: helper scripts for geometry creation, output file parsing, conversion for visulaization and interfaces with other codes. See the <a href="Scripts.html">Scripts page</a> for documentation of all included scripts.</li>
<li><b>CMake-modules</b>: customized library location code for the CMake build system.</li>
<li><b>doc</b> and <b>images</b>: source files for generating all documentation contained in this website. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
